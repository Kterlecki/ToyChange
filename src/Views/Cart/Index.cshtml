@using ToyChange.Models.ViewModel
@model CartViewModel

@{
    ViewData["Title"] = "Cart Overview";
}

<h1 class="d-flex justify-content-between align-items-center mb-3 text-primary">Cart overview</h1>

@if (Model.CartItems.Count > 0)
{


    @foreach (var item in Model.CartItems)
    {
        <div class="col-md-5">
            <ul class="list-group mb-3 ul-stripe">
                <li class="list-group-item align-items-center">
                    <img class="img-stripe" src="@item.ImageUrl" width="500" alt="Error" margin-bottom="20px">
                </li>
                <li class="list-group-item d-flex justify-content-between lh-sm"><strong>Product Name: </strong> @item.ProductName</li>
                <li class="list-group-item d-flex justify-content-between lh-sm"><strong>Product Price: </strong>$ @item.Price</li>

            </ul>

        </div>

        
        <div id="btn-stripe">

            <a class="btn btn-danger btn-sm" asp-action="Remove" asp-route-id="@item.ProductId">Remove</a>
            <form id="payment-form" method="post" asp-controller="Cart" asp-action="Create" asp-route-id="@item.ProductId">
                <script src="https://checkout.stripe.com/checkout.js"
                class="stripe-button"
                data-key="pk_test_51LqkIjJJFpBUvCYhZPFZs4C0oZTCywEROxauqy68c6obacmNVcxuQXGnBa80pKfPdVZUJyiFMCTfgcZUn2ehjm7R00AeYrPr1h"
                data-name="ToyChange Payment"
                data-description="@item.ProductName - @item.Price"
                data-locale="en"
                data-label="Pay"
                asp-action="Create"
                asp-route-id="@item.ProductId">


                </script>
            </form>
        </div>




    }





}
else
{
    <h3 class="display-4 text-center">Cart is empty.</h3>
}

